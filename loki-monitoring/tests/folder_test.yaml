suite: test loki folder
templates:
  - templates/folder.yaml
tests:
  - it: renders GrafanaFolder when enabled
    asserts:
      - hasDocuments:
          count: 1
      - isKind:
          of: GrafanaFolder
      - equal:
          path: metadata.name
          value: loki
      - equal:
          path: spec.instanceSelector.matchLabels.name
          value: grafana
      - equal:
          path: spec.title
          value: Loki
  - it: does not render when chart disabled
    set:
      enabled: false
    asserts:
      - hasDocuments:
          count: 0
  - it: reflects overridden folder name and title
    set:
      folder:
        name: loki-2
        title: Loki 2
    asserts:
      - equal:
          path: metadata.name
          value: loki-2
      - equal:
          path: spec.title
          value: Loki 2
