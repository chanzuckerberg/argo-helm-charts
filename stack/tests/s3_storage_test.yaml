# yaml-language-server: $schema=https://raw.githubusercontent.com/helm-unittest/helm-unittest/main/schema/helm-testsuite.json
suite: test s3 storage
templates:
  - s3-storage.yaml
tests:
  - it: creates correct number of resources when S3 storage is enabled
    set:
      global:
        s3Storage:
          enabled: true
          bucketName: "test-bucket"
    asserts:
      - hasDocuments:
          count: 2

  - it: creates no resources when S3 storage is disabled
    set:
      global:
        s3Storage:
          enabled: false
    asserts:
      - hasDocuments:
          count: 0

